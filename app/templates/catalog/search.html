{% extends "base.html" %}

{% block title %}Busca: {{ query }} - LojaVirtual{% endblock %}

{% block content %}
<div class="search-results">
    <h1>Resultados da busca por: "{{ query }}"</h1>
    
    {% if products.items %}
        <p class="results-count">{{ products.total }} resultado(s) encontrado(s)</p>
        
        <div class="products-grid">
            {% for product in products.items %}
                <div class="product-card">
                    <div class="product-image">
                        {% if product.imagem %}
                            <img src="{{ product.imagem }}" alt="{{ product.nome }}">
                        {% else %}
                            <div class="placeholder-image">üì¶</div>
                        {% endif %}
                    </div>
                    <div class="product-info">
                        <h3>{{ product.nome }}</h3>
                        <p class="product-price">R$ {{ "%.2f"|format(product.preco) }}</p>
                        <a href="{{ url_for('catalog.product_detail', product_id=product.id) }}" 
                           class="btn btn-sm btn-outline">
                            Ver Detalhes
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <!-- Pagina√ß√£o -->
        {% if products.pages > 1 %}
            <div class="pagination">
                {% if products.has_prev %}
                    <a href="{{ url_for('catalog.search', q=query, page=products.prev_num) }}" class="btn btn-sm">‚Üê Anterior</a>
                {% endif %}
                <span class="page-info">P√°gina {{ products.page }} de {{ products.pages }}</span>
                {% if products.has_next %}
                    <a href="{{ url_for('catalog.search', q=query, page=products.next_num) }}" class="btn btn-sm">Pr√≥xima ‚Üí</a>
                {% endif %}
            </div>
        {% endif %}
    {% else %}
        <div class="no-results">
            <p>Nenhum produto encontrado com os termos "{{ query }}".</p>
            <a href="{{ url_for('catalog.index') }}" class="btn btn-primary">Voltar ao Cat√°logo</a>
        </div>
    {% endif %}
</div>
{% endblock %}
